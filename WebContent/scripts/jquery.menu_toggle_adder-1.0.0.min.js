
(function($){$.fn.menu_toggle_adder=function(options){var defaults={animate_toggle:'yes',highlight_selected_link:'yes',toggle:'images/toggle.gif',toggled:'images/toggled.gif',toggle_selected:'images/toggle_selected.gif',toggled_selected:'images/toggled_selected.gif'};var opts=$.extend(defaults,options);if(defaults.highlight_selected_link=='yes'){var page_name_string=location.pathname.toString();var page_name_array=page_name_string.split('/');var page_name=page_name_array[page_name_array.length-1];if(jQuery.browser.msie&&(jQuery.browser.version<7))
{var page_name_array=page_name_string.split('\\');var page_name=page_name_array[page_name_array.length-1];}
if(page_name){$('#menu a[@href$="'+page_name+'"]').addClass('menu_selected');}
$("#menu li ul li a.menu_selected").parent("li").parent("ul").parent("li").children().eq(0).addClass("menu_selected");}
$(".menu_selected").parent("li").children("ul").show();$("#menu li a").parent('li:has(ul)').each(function(){var $this=$(this);$this.children("a").eq("0").before("<img class='toggler'>");$(".toggler").attr({src:defaults.toggle});});$("#menu li a").parent('li:has(ul)').each(function(){var $this=$(this);$this.children("a.menu_selected").eq("0").prev('.toggler').attr({src:defaults.toggled_selected});});$("#menu li img").each(function(){var $this=$(this);var toggler_src=$this.attr("src");if(toggler_src==defaults.toggled_selected&&defaults.animate_toggle=="yes"){$this.toggle(function(){$this.nextAll("ul").slideUp("fast");$this.attr("src",defaults.toggle_selected);},function(){$this.nextAll("ul").slideDown("fast");$this.attr("src",defaults.toggled_selected);});}
else
if(toggler_src==defaults.toggle&&defaults.animate_toggle=="yes"){$this.toggle(function(){$this.nextAll("ul").slideDown("fast");$this.attr("src",defaults.toggled);},function(){$this.nextAll("ul").slideUp("fast");$this.attr("src",defaults.toggle);});}
else if(toggler_src==defaults.toggled_selected&&defaults.animate_toggle=="no"){$this.toggle(function(){$this.nextAll("ul").hide();$this.attr("src",defaults.toggle_selected);},function(){$this.nextAll("ul").show();$this.attr("src",defaults.toggled_selected);});}
else
if(toggler_src==defaults.toggle&&defaults.animate_toggle=="no"){$this.toggle(function(){$this.nextAll("ul").show();$this.attr("src",defaults.toggled);},function(){$this.nextAll("ul").hide();$this.attr("src",defaults.toggle);});}});$("#menu li:has(a.menu_selected)").addClass('menu_selected_holder');$("#menu li ul li:has(a.menu_selected)").removeClass('menu_selected_holder');$("#menu li a:not('.menu_selected')").hover(function(){$(this).css("background-color","transparent");},function(){$(this).css("background-color","transparent");});}})(jQuery);